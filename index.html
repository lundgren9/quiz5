<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>💰 Quiz: Simrishamns Kommunkostnader 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /*
        Här skedde en uppdatering - skapade ett nytt quiz baserat på Simrishamns kommunkostnader
        istället för kulturkanon-frågor. Programmet använder samma tekniska struktur som quiz.html
        men med nytt innehåll fokuserat på kommunekonomi.
        */

        /* Reset och grundläggande styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(135deg, #f5f3f0 0%, #e6f3ff 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }

        /* Quiz-container med modern design */
        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        /* Dekorativ topp-bar med gradient - här skedde en uppdatering för att matcha kommunfärger */
        .quiz-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #c0392b, #2980b9, #27ae60, #f39c12, #8e44ad);
        }

        /* Quiz header med titel och subtitle */
        .quiz-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .quiz-title {
            font-family: 'Fredoka', cursive;
            font-size: 2.5rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .quiz-subtitle {
            font-size: 1.1rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Progressbar för att visa framsteg */
        .progress-bar {
            background: #ecf0f1;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #c0392b, #2980b9);
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Bildsektion för att visa kommunhus eller kommunvapen */
        .image-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            text-align: center;
        }

        .quiz-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            cursor: pointer;
            transition: transform 0.3s ease;
            /* Placeholder för kommunbild */
            background: linear-gradient(135deg, #c0392b, #2980b9);
            width: 300px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .quiz-image:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .image-text {
            font-size: 1.1rem;
            color: #7f8c8d;
            font-style: italic;
        }

        /* Text om kommunen - här skedde en uppdatering för att lägga till information om Simrishamns kommunkostnader */
        .kommun-description {
            background: #f8f9fa;
            border-left: 4px solid #2980b9;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            line-height: 1.6;
            color: #2c3e50;
            opacity: 0;
            transform: translateY(20px);
            animation: slideInFade 1s ease forwards;
        }

        .kommun-description h3 {
            color: #2980b9;
            margin-bottom: 15px;
            font-family: 'Fredoka', cursive;
        }

        /* Här skedde en uppdatering - la till styling för "Gå vidare till Quiz" knappen */
        .continue-btn {
            background: linear-gradient(135deg, #2980b9, #3498db);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 25px auto 0 auto;
            min-width: 200px;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(41, 128, 185, 0.4);
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        /* Frågecontainer */
        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            font-family: 'Fredoka', cursive;
            font-size: 1.2rem;
            color: #2980b9;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        /* Svarsalternativ med hover-effekter och gul bakgrund för indatafält enligt användarens önskemål */
        .options-container {
            display: grid;
            gap: 12px;
            margin-bottom: 30px;
        }

        .option {
            background: #fffacd; /* Gul bakgrund för indatafält som användaren specificerat */
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            background: #fff8b3;
            border-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(41, 128, 185, 0.2);
        }

        .option.selected {
            background: #2980b9;
            color: white;
            border-color: #2980b9;
        }

        .option.correct {
            background: #2ecc71;
            color: white;
            border-color: #27ae60;
        }

        .option.incorrect {
            background: #e74c3c;
            color: white;
            border-color: #c0392b;
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* Nästa-knapp styling */
        .next-btn {
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
            min-width: 150px;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(192, 57, 43, 0.4);
        }

        .next-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Feedback-system med animationer */
        .answer-feedback {
            background: #e8f5e8;
            border-left: 4px solid #2ecc71;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.5s ease;
        }

        .answer-feedback.show {
            opacity: 1;
            transform: translateY(0);
        }

        .correct-answer {
            font-weight: 600;
            color: #27ae60;
            margin-bottom: 10px;
        }

        .source-link {
            color: #3498db;
            text-decoration: none;
            font-weight: 600;
        }

        .source-link:hover {
            text-decoration: underline;
        }

        /* Resultatsektion */
        .results-container {
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-family: 'Fredoka', cursive;
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .score {
            font-size: 3rem;
            font-weight: 600;
            color: #2980b9;
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 30px;
        }

        .restart-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .continue-to-costs-btn {
            background: linear-gradient(135deg, #2980b9, #3498db);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .continue-to-costs-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(41, 128, 185, 0.4);
        }

        .choice-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        /* Informationsskärm innan kostnadsfilen */
        .info-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .info-screen h2 {
            font-family: 'Fredoka', cursive;
            font-size: 2.2rem;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .info-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            color: #856404;
        }

        .info-warning h3 {
            color: #b8860b;
            margin-bottom: 15px;
        }

        .info-explanation {
            background: #d1ecf1;
            border: 2px solid #bee5eb;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            color: #0c5460;
            text-align: left;
        }

        .info-explanation h3 {
            color: #0c5460;
            margin-bottom: 15px;
            text-align: center;
        }

        .info-explanation ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .proceed-btn {
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 10px;
        }

        .proceed-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(192, 57, 43, 0.4);
        }

        /* Floating action buttons nere till höger */
        .floating-buttons {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .floating-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .tech-btn {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
        }

        .prompt-btn {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .floating-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* Modal-fönster för teknisk info och prompt */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            transform: translateY(-50px);
            animation: slideIn 0.3s ease forwards;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            margin-top: -10px;
        }

        .close:hover {
            color: #000;
        }

        .modal h2 {
            font-family: 'Fredoka', cursive;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .modal p, .modal li {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .modal ul {
            margin-left: 20px;
        }

        .modal code {
            background: #f1f2f6;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }

        /* Dold klass för att dölja element */
        .hidden {
            display: none !important;
        }

        /* Animationer */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Här skedde en uppdatering - la till animation för kommuntext */
        @keyframes slideInFade {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* Responsiv design för mobiler */
        @media (max-width: 768px) {
            .quiz-container {
                padding: 25px;
                margin: 10px;
            }

            .quiz-title {
                font-size: 2rem;
            }

            .question-text {
                font-size: 1.1rem;
            }

            .floating-buttons {
                bottom: 15px;
                right: 15px;
            }

            .floating-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .modal-content {
                margin: 10% auto;
                padding: 20px;
            }

            .quiz-image {
                max-height: 150px;
                width: 250px;
                font-size: 2rem;
            }

            .choice-buttons {
                flex-direction: column;
                align-items: center;
            }

            .info-explanation ul {
                margin-left: 10px;
            }

            .info-screen h2 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Huvud quiz-container -->
    <div class="quiz-container">
        <!-- Quiz header med titel, subtitle och progressbar -->
        <div class="quiz-header">
            <h1 class="quiz-title">💰 Quiz: Simrishamns Kommunkostnader 2025</h1>
            <p class="quiz-subtitle">📊 5 frågor om Kultur & Fritid och Socialförvaltningens kostnader i Simrishamn</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- Bildsektion som visas i början - här skedde en uppdatering för att använda kommunsymbol -->
        <div id="imageSection" class="image-section">
            <div class="quiz-image">🏛️</div>
            <p class="image-text">Simrishamns kommun - ekonomisk översikt 2025</p>
        </div>

        <!-- Kommunbeskrivning som visas efter bilden - här skedde en uppdatering för att lägga till text om kommunens ekonomi -->
        <div id="kommunDescription" class="kommun-description hidden">
            <h3>Simrishamns Kommunkostnader 2025</h3>
            <p>Simrishamn är en kommun med 19 000 invånare som står inför unika ekonomiska utmaningar. Kommunen har en ovanligt hög andel äldre invånare (35,5% över 65 år jämfört med riksgenomsnittet på 20%), vilket påverkar kostnaderna för sociala insatser.</p>
            <p>Trots detta lyckas kommunen vara effektiv inom många områden. Kultur & Fritid kostar 3 198 kr per invånare, vilket är 32% lägre än det uppskattade riksgenomsnittet. Socialförvaltningen kostar 32 452 kr per invånare, men detta förklaras av den demografiska strukturen.</p>
            <p>Den intressanta paradoxen är att Simrishamn faktiskt är mer kostnadseffektiv per äldre invånare än riksgenomsnittet, men den stora andelen äldre gör att totalkostnaderna ändå blir höga per invånare.</p>
            <!-- Här skedde en uppdatering - la till knapp för att låta användaren själv välja när de vill gå vidare -->
            <button class="continue-btn" id="continueBtn" onclick="proceedToQuiz()">Gå vidare till Quiz ➡️</button>
        </div>

        <!-- Quiz-innehåll som byts ut dynamiskt -->
        <div id="quizContent" class="hidden">
            <!-- Quiz content will be inserted here by JavaScript -->
        </div>
    </div>

    <!-- Floating action buttons nere till höger -->
    <div class="floating-buttons">
        <button class="floating-btn tech-btn" onclick="openModal('techModal')" title="Teknisk beskrivning">🔧</button>
        <button class="floating-btn prompt-btn" onclick="openModal('promptModal')" title="Visa prompt">📄</button>
    </div>

    <!-- Modal för teknisk beskrivning -->
    <div id="techModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('techModal')">&times;</span>
            <h2>🔧 Teknisk beskrivning</h2>
            <p><strong>Teknologier:</strong></p>
            <ul>
                <li><strong>HTML5:</strong> Semantisk struktur och tillgänglighet</li>
                <li><strong>CSS3:</strong> Flexbox, Grid, animationer och gradients</li>
                <li><strong>Vanilla JavaScript:</strong> Ingen externa ramverk, ren ES6+</li>
                <li><strong>Google Fonts:</strong> Fredoka för rubriker, Open Sans för brödtext</li>
            </ul>
            
            <p><strong>Funktioner:</strong></p>
            <ul>
                <li>Interaktivt quiz med 5 frågor om Simrishamns kommunkostnader</li>
                <li>Progressbar som visar framsteg genom quizet</li>
                <li>Informationssektion om kommunens ekonomiska situation</li>
                <li>Animerade övergångar och hover-effekter</li>
                <li>Responsiv design för alla enheter</li>
                <li>Modal-fönster med teknisk info och prompt</li>
                <li>Automatisk visning av rätta svar och förklaringar med källor</li>
                <li>Färgkodade svar (grön för rätt, röd för fel)</li>
                <li>Gul bakgrund för indatafält enligt användarens önskemål</li>
            </ul>

            <p><strong>Design:</strong></p>
            <ul>
                <li>Kommunfärger: Röd (Kultur & Fritid) och Blå (Socialförvaltning)</li>
                <li>Rundade hörn och skuggor för modern look</li>
                <li>Färgrik progressbar och dekorativ topp-bar</li>
                <li>Floating action buttons nere till höger</li>
                <li>Speciell kommunbeskrivning med animerad inmatning</li>
            </ul>

            <p><strong>Kompatibilitet:</strong> Fungerar i alla moderna webbläsare</p>
        </div>
    </div>

    <!-- Modal för att visa ursprunglig prompt -->
    <div id="promptModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('promptModal')">&times;</span>
            <h2>📄 Ursprunglig prompt</h2>
            <p>Jag vill att du gör ett quiz som utgår från <strong>quiz.html</strong> strukturen. Jag vill att quizet ska fokusera på det som som återfinns i <strong>Simrishamns_kommunkostnader.html</strong>. Du ska bygga programmet, quiziet, på <strong>index.html</strong> filen. Alla andra filer ska vara oförändrade.</p>
            
            <p>Du har information om vad som hänt till och med augusti inom de två förvaltningarna <strong>Kultur och Fritid</strong> och <strong>Socialförvaltningen</strong> i två filer som ligger i samma mapp.</p>

            <p><strong>Nya quiz-frågor:</strong> 5 frågor om Simrishamns kommunkostnader med fokus på Kultur & Fritid och Socialförvaltningen.</p>

            <p><strong>Teknisk implementation:</strong> Samma tekniska struktur som quiz.html men anpassad för kommunekonomi-innehåll.</p>

            <p><strong>Designkrav:</strong> Samma färgtema och funktionalitet som quiz.html, men anpassat för kommunal ekonomi med responsiv design och moderna interaktionseffekter.</p>
        </div>
    </div>

    <script>
        // Quiz-data med frågor, svarsalternativ, rätta svar och förklaringar
        // Här skedde en uppdatering - skapade nya frågor baserade på Simrishamns kommunkostnader
        // istället för kulturkanon-frågor
        const quizData = [
            {
                question: "Hur mycket kostar Kultur & Fritid per invånare i Simrishamn, och hur förhåller sig detta till uppskattade riksgenomsnitt? (OBS: Jämförelser är osäkra eftersom definitioner av 'Kultur & Fritid' varierar mellan kommuner)",
                options: [
                    "A) 3 198 kr per invånare, 32% lägre än uppskattade riksgenomsnittet",
                    "B) 4 700 kr per invånare, samma som uppskattade riksgenomsnittet", 
                    "C) 2 850 kr per invånare, 40% lägre än uppskattade riksgenomsnittet",
                    "D) 3 500 kr per invånare, 25% lägre än uppskattade riksgenomsnittet"
                ],
                correct: 0,
                explanation: "✅ Rätt svar: A) Kultur & Fritid kostar 3 198 kr per invånare, vilket är 32% lägre än det uppskattade riksgenomsnittet på 4 700 kr. VIKTIGT: Dessa jämförelser är osäkra eftersom kommuner definierar 'Kultur & Fritid' olika.",
                source: "📊 Källa: Simrishamns kommunkostnader 2025 - Kultur & Fritid: 60,757 mkr/år ÷ 19 000 invånare = 3 198 kr per invånare. Riksgenomsnitt är uppskattning baserad på SCB-data och totalkostnader."
            },
            {
                question: "Socialförvaltningen kostar 615,6 mkr per år. Hur många gånger större är denna kostnad jämfört med Kultur & Fritid?",
                options: [
                    "A) 8,5 gånger större",
                    "B) 10,1 gånger större",
                    "C) 12,3 gånger större", 
                    "D) 15,2 gånger större"
                ],
                correct: 1,
                explanation: "✅ Rätt svar: B) Socialförvaltningen (615,6 mkr) kostar 10,1 gånger mer än Kultur & Fritid (60,8 mkr).",
                source: "📊 Källa: 615,6 mkr ÷ 60,8 mkr = 10,1 gånger större kostnad för Socialförvaltningen"
            },
            {
                question: "Vilken andel av Simrishamns befolkning är över 65 år, och hur påverkar detta kommunens kostnader?",
                options: [
                    "A) 28,5% över 65 år, medför måttligt höga kostnader",
                    "B) 35,5% över 65 år, medför höga kostnader trots effektiv äldrevård",
                    "C) 42,0% över 65 år, medför extremt höga kostnader",
                    "D) 20,0% över 65 år, samma som riksgenomsnittet"
                ],
                correct: 1,
                explanation: "✅ Rätt svar: B) 35,5% av befolkningen är över 65 år (jämfört med riksgenomsnittet 20%), vilket medför höga totalkostnader trots att Simrishamn är effektiv per äldre invånare.",
                source: "📊 Källa: Simrishamns demografiska 'paradox' - många äldre invånare × effektiv kostnad per äldre = ändå hög total kostnad per invånare"
            },
            {
                question: "Hur fördelar sig Socialförvaltningens kostnader mellan de tre huvudkategorierna Barn & Unga, Vuxna och Äldre?",
                options: [
                    "A) Barn & Unga: 38,4 mkr, Vuxna: 167,2 mkr, Äldre: 394,5 mkr",
                    "B) Barn & Unga: 120,0 mkr, Vuxna: 200,0 mkr, Äldre: 295,6 mkr",
                    "C) Barn & Unga: 250,0 mkr, Vuxna: 100,0 mkr, Äldre: 265,6 mkr", 
                    "D) Barn & Unga: 180,0 mkr, Vuxna: 280,0 mkr, Äldre: 155,6 mkr"
                ],
                correct: 0,
                explanation: "✅ Rätt svar: A) Äldre tar den största delen (394,5 mkr), följt av Vuxna (167,2 mkr) och Barn & Unga (38,4 mkr). Detta speglar Simrishamns demografiska struktur med 35,5% av befolkningen över 65 år.",
                source: "📊 Källa: Socialförvaltningens fördelning - Äldre står för 64% av kostnaderna, vilket speglar kommunens demografiska struktur med extremt hög andel äldre invånare"
            },
            {
                question: "Trots att Simrishamn har höga sociala kostnader per invånare, vad visar analysen om kommunens effektivitet inom äldrevården? (OBS: Jämförelser är osäkra eftersom 'socialförvaltning' definieras olika mellan kommuner)",
                options: [
                    "A) Simrishamn är 16% mer kostnadseffektiv per äldre invånare än uppskattade riksgenomsnittet",
                    "B) Simrishamn har samma kostnadseffektivitet som uppskattade riksgenomsnittet",
                    "C) Simrishamn är 25% mindre kostnadseffektiv än uppskattade riksgenomsnittet",
                    "D) Data saknas för att göra denna jämförelse"
                ],
                correct: 0,
                explanation: "✅ Rätt svar: A) Simrishamn är faktiskt 16% mer kostnadseffektiv per äldre invånare (58 489 kr vs uppskattat riksgenomsnitt 70 000 kr), men den stora andelen äldre gör att totalkostnaderna ändå blir höga. VIKTIGT: Jämförelser är osäkra eftersom kommuner organiserar socialförvaltning olika.",
                source: "📊 Källa: Paradoxen förklarad - effektiv äldrevård × många äldre invånare = höga totalkostnader per invånare trots god effektivitet. Riksgenomsnitt är uppskattning baserad på SCB-data och kostnadstrender."
            }
        ];

        // Globala variabler för quiz-status
        let currentQuestion = 0;
        let score = 0;
        let selectedAnswer = null;
        let answered = false;
        let quizPhase = 'initial'; // 'initial', 'description', 'question', 'result'

        // DOM-element referenser
        const imageSection = document.getElementById('imageSection');
        const kommunDescription = document.getElementById('kommunDescription');
        const quizContent = document.getElementById('quizContent');
        const progressFill = document.getElementById('progressFill');

        // Funktion för att visa bild under en viss tid
        // Här skedde en uppdatering - ändrade från 2 sekunder till 4 sekunder enligt användarens önskemål
        function showImage(duration, callback, text = "Simrishamns kommun - ekonomisk översikt 2025") {
            imageSection.classList.remove('hidden');
            kommunDescription.classList.add('hidden');
            quizContent.classList.add('hidden');
            
            // Uppdatera bildtext
            const imageText = document.querySelector('.image-text');
            imageText.textContent = text;
            
            setTimeout(() => {
                if (callback) callback();
            }, duration);
        }

        // Funktion för att visa kommunbeskrivning
        // Här skedde en uppdatering - la till text om Simrishamns kommunkostnader
        function showKommunDescription() {
            quizPhase = 'description';
            imageSection.classList.add('hidden');
            kommunDescription.classList.remove('hidden');
            quizContent.classList.add('hidden');
            
            // Nu väntar vi på att användaren klickar på knappen istället för automatisk timer
        }

        // Här skedde en uppdatering - ny funktion för att gå vidare till quiz när användaren klickar
        function proceedToQuiz() {
            showQuestion();
        }

        // Funktion för att dölja allt och visa quiz-innehåll
        function hideAllShowQuiz() {
            imageSection.classList.add('hidden');
            kommunDescription.classList.add('hidden');
            quizContent.classList.remove('hidden');
        }

        // Funktion för att uppdatera progressbaren
        function updateProgress() {
            const progress = (currentQuestion / quizData.length) * 100;
            progressFill.style.width = progress + '%';
        }

        // Funktion för att visa en fråga
        function showQuestion() {
            quizPhase = 'question';
            hideAllShowQuiz();
            
            const questionData = quizData[currentQuestion];
            
            quizContent.innerHTML = `
                <div class="question-container">
                    <div class="question-number">Fråga ${currentQuestion + 1} av ${quizData.length}</div>
                    <div class="question-text">${questionData.question}</div>
                    <div class="options-container" id="optionsContainer">
                        ${questionData.options.map((option, index) => `
                            <div class="option" onclick="selectAnswer(${index})" data-index="${index}">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="answer-feedback" id="answerFeedback"></div>
                    <button class="next-btn" id="nextBtn" onclick="nextQuestion()" disabled>
                        ${currentQuestion === quizData.length - 1 ? 'Se resultat 🎉' : 'Nästa fråga ➡️'}
                    </button>
                </div>
            `;
            
            selectedAnswer = null;
            answered = false;
        }

        // Funktion för att hantera svar på frågor
        function selectAnswer(answerIndex) {
            if (answered) return;
            
            selectedAnswer = answerIndex;
            const options = document.querySelectorAll('.option');
            const questionData = quizData[currentQuestion];
            
            // Ta bort tidigare markeringar
            options.forEach(option => option.classList.remove('selected'));
            
            // Markera valt svar
            options[answerIndex].classList.add('selected');
            
            // Visa rätt/fel svar efter kort fördröjning
            setTimeout(() => {
                answered = true;
                
                options.forEach((option, index) => {
                    option.classList.add('disabled');
                    if (index === questionData.correct) {
                        option.classList.add('correct');
                    } else if (index === answerIndex && index !== questionData.correct) {
                        option.classList.add('incorrect');
                    }
                });
                
                // Uppdatera poäng
                if (answerIndex === questionData.correct) {
                    score++;
                }
                
                // Visa feedback
                showFeedback();
                
                // Aktivera nästa-knappen
                document.getElementById('nextBtn').disabled = false;
            }, 500);
        }

        // Funktion för att visa feedback efter svar
        function showFeedback() {
            const questionData = quizData[currentQuestion];
            const feedbackDiv = document.getElementById('answerFeedback');
            
            feedbackDiv.innerHTML = `
                <div class="correct-answer">${questionData.explanation}</div>
                <div>${questionData.source}</div>
            `;
            
            feedbackDiv.classList.add('show');
        }

        // Funktion för att gå till nästa fråga eller visa resultat
        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                updateProgress();
                // Gå direkt till nästa fråga
                showQuestion();
            } else {
                showResults();
            }
        }

        // Funktion för att visa slutresultat
        function showResults() {
            quizPhase = 'result';
            hideAllShowQuiz();
            
            const percentage = Math.round((score / quizData.length) * 100);
            let message = "";
            let emoji = "";
            
            if (percentage >= 80) {
                message = "Fantastiskt! Du är en riktig expert på Simrishamns kommunkostnader! 🌟";
                emoji = "🏆";
            } else if (percentage >= 60) {
                message = "Bra jobbat! Du förstår kommunens ekonomiska situation väl! 👏";
                emoji = "🎉";
            } else if (percentage >= 40) {
                message = "Inte illa! Det finns mer att lära om kommunal ekonomi! 📚";
                emoji = "👍";
            } else {
                message = "En bra start! Kommunal ekonomi är komplext - fortsätt utforska! 🔍";
                emoji = "🌱";
            }
            
            quizContent.innerHTML = `
                <div class="results-container">
                    <div class="results-title">${emoji} Quiz slutförd!</div>
                    <div class="score">${score}/${quizData.length}</div>
                    <div class="score-message">${message}</div>
                    <div class="score-message">Du fick ${percentage}% rätt!</div>
                    <div class="choice-buttons">
                        <button class="restart-btn" onclick="restartQuiz()">Kör igen 🔄</button>
                        <button class="continue-to-costs-btn" onclick="showInfoScreen()">Gå vidare till kostnadsfilen 📊</button>
                    </div>
                </div>
            `;
            
            updateProgress();
        }

        // Funktion för att starta om quizet
        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            selectedAnswer = null;
            answered = false;
            startQuiz();
        }

        // Här skedde en uppdatering - ny funktion för att visa informationsskärm innan kostnadsfilen
        function showInfoScreen() {
            quizPhase = 'info';
            hideAllShowQuiz();
            
            quizContent.innerHTML = `
                <div class="info-screen">
                    <h2>📊 Innan du går vidare till kostnadsfilen</h2>
                    
                    <div class="info-warning">
                        <h3>⚠️ Viktigt att komma ihåg</h3>
                        <p><strong>Alla genomsnittliga kostnader i denna analys är uppskattade!</strong></p>
                        <p>Det är mycket svårt att jämföra kommuner eftersom:</p>
                        <ul>
                            <li>Definitionerna av "Kultur & Fritid" varierar mellan kommuner</li>
                            <li>Organisationen av "socialförvaltning" skiljer sig åt</li>
                            <li>Redovisningsmetoder och kategoriseringar är inte standardiserade</li>
                            <li>Riksgenomsnitt är baserade på uppskattningar från SCB-data och totalkostnader</li>
                        </ul>
                    </div>
                    
                    <div class="info-explanation">
                        <h3>📋 Hur kostnadsfilen är uppbyggd</h3>
                        <p>I nästa fil (Simrishamns_kommunkostnader.html) kommer du att se:</p>
                        <ul>
                            <li><strong>Visuell jämförelse:</strong> Interaktiva staplar som visar proportionerna mellan Kultur & Fritid och Socialförvaltningen</li>
                            <li><strong>Olika vyer:</strong> Du kan växla mellan totala kostnader, kostnader per invånare och jämförelser med Sverige</li>
                            <li><strong>Demografisk förklaring:</strong> Varför Simrishamn har höga sociala kostnader trots effektiv äldrevård</li>
                            <li><strong>Detaljerad uppdelning:</strong> Hur socialförvaltningens kostnader fördelar sig mellan Barn & Unga, Vuxna och Äldre</li>
                            <li><strong>Interaktiva funktioner:</strong> Hover-effekter, tooltips med beräkningsgrunder och modal-fönster med teknisk information</li>
                        </ul>
                        <p><em>Kom ihåg att alla jämförelser med riksgenomsnitt är uppskattningar och bör tolkas med försiktighet!</em></p>
                    </div>
                    
                    <div class="choice-buttons">
                        <button class="restart-btn" onclick="restartQuiz()">Tillbaka till quiz 🔄</button>
                        <button class="proceed-btn" onclick="goToCostsFile()">Fortsätt till kostnadsfilen ➡️</button>
                    </div>
                </div>
            `;
        }

        // Här skedde en uppdatering - ny funktion för att gå till kostnadsfilen
        function goToCostsFile() {
            // Öppna kostnadsfilen i samma fönster
            window.location.href = 'Simrishamns_kommunkostnader.html';
        }

        // Funktion för att starta quizet
        // Här skedde en uppdatering - ändrade sekvensen för att visa bild i 4 sekunder, 
        // sedan kommunbeskrivning, sedan första frågan
        function startQuiz() {
            quizPhase = 'initial';
            updateProgress();
            // Visa bild i 4 sekunder, sedan kommunbeskrivning med knapp för att fortsätta
            showImage(4000, () => {
                showKommunDescription();
            }, "Välkommen till quizet om Simrishamns kommunkostnader!");
        }

        // Funktioner för modal-fönster
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Stäng modal när man klickar utanför
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // Starta quizet när sidan laddas
        // Använder ES2023 funktionalitet med modern event handling
        window.addEventListener('load', startQuiz);
    </script>
</body>
</html>
