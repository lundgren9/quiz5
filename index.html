<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Quiz: Simrishamns Kommunkostnader 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /*
        H√§r skedde en uppdatering - skapade ett nytt quiz baserat p√• Simrishamns kommunkostnader
        ist√§llet f√∂r kulturkanon-fr√•gor. Programmet anv√§nder samma tekniska struktur som quiz.html
        men med nytt inneh√•ll fokuserat p√• kommunekonomi.
        */

        /* Reset och grundl√§ggande styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(135deg, #f5f3f0 0%, #e6f3ff 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }

        /* Quiz-container med modern design */
        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        /* Dekorativ topp-bar med gradient - h√§r skedde en uppdatering f√∂r att matcha kommunf√§rger */
        .quiz-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #c0392b, #2980b9, #27ae60, #f39c12, #8e44ad);
        }

        /* Quiz header med titel och subtitle */
        .quiz-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .quiz-title {
            font-family: 'Fredoka', cursive;
            font-size: 2.5rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .quiz-subtitle {
            font-size: 1.1rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Progressbar f√∂r att visa framsteg */
        .progress-bar {
            background: #ecf0f1;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #c0392b, #2980b9);
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Bildsektion f√∂r att visa kommunhus eller kommunvapen */
        .image-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            text-align: center;
        }

        .quiz-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            cursor: pointer;
            transition: transform 0.3s ease;
            /* Placeholder f√∂r kommunbild */
            background: linear-gradient(135deg, #c0392b, #2980b9);
            width: 300px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .quiz-image:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .image-text {
            font-size: 1.1rem;
            color: #7f8c8d;
            font-style: italic;
        }

        /* Text om kommunen - h√§r skedde en uppdatering f√∂r att l√§gga till information om Simrishamns kommunkostnader */
        .kommun-description {
            background: #f8f9fa;
            border-left: 4px solid #2980b9;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            line-height: 1.6;
            color: #2c3e50;
            opacity: 0;
            transform: translateY(20px);
            animation: slideInFade 1s ease forwards;
        }

        .kommun-description h3 {
            color: #2980b9;
            margin-bottom: 15px;
            font-family: 'Fredoka', cursive;
        }

        /* H√§r skedde en uppdatering - la till styling f√∂r "G√• vidare till Quiz" knappen */
        .continue-btn {
            background: linear-gradient(135deg, #2980b9, #3498db);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 25px auto 0 auto;
            min-width: 200px;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(41, 128, 185, 0.4);
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        /* Fr√•gecontainer */
        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            font-family: 'Fredoka', cursive;
            font-size: 1.2rem;
            color: #2980b9;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        /* Svarsalternativ med hover-effekter och gul bakgrund f√∂r indataf√§lt enligt anv√§ndarens √∂nskem√•l */
        .options-container {
            display: grid;
            gap: 12px;
            margin-bottom: 30px;
        }

        .option {
            background: #fffacd; /* Gul bakgrund f√∂r indataf√§lt som anv√§ndaren specificerat */
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            background: #fff8b3;
            border-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(41, 128, 185, 0.2);
        }

        .option.selected {
            background: #2980b9;
            color: white;
            border-color: #2980b9;
        }

        .option.correct {
            background: #2ecc71;
            color: white;
            border-color: #27ae60;
        }

        .option.incorrect {
            background: #e74c3c;
            color: white;
            border-color: #c0392b;
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* N√§sta-knapp styling */
        .next-btn {
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
            min-width: 150px;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(192, 57, 43, 0.4);
        }

        .next-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Feedback-system med animationer */
        .answer-feedback {
            background: #e8f5e8;
            border-left: 4px solid #2ecc71;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.5s ease;
        }

        .answer-feedback.show {
            opacity: 1;
            transform: translateY(0);
        }

        .correct-answer {
            font-weight: 600;
            color: #27ae60;
            margin-bottom: 10px;
        }

        .source-link {
            color: #3498db;
            text-decoration: none;
            font-weight: 600;
        }

        .source-link:hover {
            text-decoration: underline;
        }

        /* Resultatsektion */
        .results-container {
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-family: 'Fredoka', cursive;
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .score {
            font-size: 3rem;
            font-weight: 600;
            color: #2980b9;
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 30px;
        }

        .restart-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .continue-to-costs-btn {
            background: linear-gradient(135deg, #2980b9, #3498db);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .continue-to-costs-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(41, 128, 185, 0.4);
        }

        .choice-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        /* Informationssk√§rm innan kostnadsfilen */
        .info-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .info-screen h2 {
            font-family: 'Fredoka', cursive;
            font-size: 2.2rem;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .info-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            color: #856404;
        }

        .info-warning h3 {
            color: #b8860b;
            margin-bottom: 15px;
        }

        .info-explanation {
            background: #d1ecf1;
            border: 2px solid #bee5eb;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            color: #0c5460;
            text-align: left;
        }

        .info-explanation h3 {
            color: #0c5460;
            margin-bottom: 15px;
            text-align: center;
        }

        .info-explanation ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .proceed-btn {
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 10px;
        }

        .proceed-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(192, 57, 43, 0.4);
        }

        /* Floating action buttons nere till h√∂ger */
        .floating-buttons {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .floating-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .tech-btn {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
        }

        .prompt-btn {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .floating-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* Modal-f√∂nster f√∂r teknisk info och prompt */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            transform: translateY(-50px);
            animation: slideIn 0.3s ease forwards;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            margin-top: -10px;
        }

        .close:hover {
            color: #000;
        }

        .modal h2 {
            font-family: 'Fredoka', cursive;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .modal p, .modal li {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .modal ul {
            margin-left: 20px;
        }

        .modal code {
            background: #f1f2f6;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }

        /* Dold klass f√∂r att d√∂lja element */
        .hidden {
            display: none !important;
        }

        /* Animationer */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* H√§r skedde en uppdatering - la till animation f√∂r kommuntext */
        @keyframes slideInFade {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* Responsiv design f√∂r mobiler */
        @media (max-width: 768px) {
            .quiz-container {
                padding: 25px;
                margin: 10px;
            }

            .quiz-title {
                font-size: 2rem;
            }

            .question-text {
                font-size: 1.1rem;
            }

            .floating-buttons {
                bottom: 15px;
                right: 15px;
            }

            .floating-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .modal-content {
                margin: 10% auto;
                padding: 20px;
            }

            .quiz-image {
                max-height: 150px;
                width: 250px;
                font-size: 2rem;
            }

            .choice-buttons {
                flex-direction: column;
                align-items: center;
            }

            .info-explanation ul {
                margin-left: 10px;
            }

            .info-screen h2 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Huvud quiz-container -->
    <div class="quiz-container">
        <!-- Quiz header med titel, subtitle och progressbar -->
        <div class="quiz-header">
            <h1 class="quiz-title">üí∞ Quiz: Simrishamns Kommunkostnader 2025</h1>
            <p class="quiz-subtitle">üìä 5 fr√•gor om Kultur & Fritid och Socialf√∂rvaltningens kostnader i Simrishamn</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- Bildsektion som visas i b√∂rjan - h√§r skedde en uppdatering f√∂r att anv√§nda kommunsymbol -->
        <div id="imageSection" class="image-section">
            <div class="quiz-image">üèõÔ∏è</div>
            <p class="image-text">Simrishamns kommun - ekonomisk √∂versikt 2025</p>
        </div>

        <!-- Kommunbeskrivning som visas efter bilden - h√§r skedde en uppdatering f√∂r att l√§gga till text om kommunens ekonomi -->
        <div id="kommunDescription" class="kommun-description hidden">
            <h3>Simrishamns Kommunkostnader 2025</h3>
            <p>Simrishamn √§r en kommun med 19 000 inv√•nare som st√•r inf√∂r unika ekonomiska utmaningar. Kommunen har en ovanligt h√∂g andel √§ldre inv√•nare (35,5% √∂ver 65 √•r j√§mf√∂rt med riksgenomsnittet p√• 20%), vilket p√•verkar kostnaderna f√∂r sociala insatser.</p>
            <p>Trots detta lyckas kommunen vara effektiv inom m√•nga omr√•den. Kultur & Fritid kostar 3 198 kr per inv√•nare, vilket √§r 32% l√§gre √§n det uppskattade riksgenomsnittet. Socialf√∂rvaltningen kostar 32 452 kr per inv√•nare, men detta f√∂rklaras av den demografiska strukturen.</p>
            <p>Den intressanta paradoxen √§r att Simrishamn faktiskt √§r mer kostnadseffektiv per √§ldre inv√•nare √§n riksgenomsnittet, men den stora andelen √§ldre g√∂r att totalkostnaderna √§nd√• blir h√∂ga per inv√•nare.</p>
            <!-- H√§r skedde en uppdatering - la till knapp f√∂r att l√•ta anv√§ndaren sj√§lv v√§lja n√§r de vill g√• vidare -->
            <button class="continue-btn" id="continueBtn" onclick="proceedToQuiz()">G√• vidare till Quiz ‚û°Ô∏è</button>
        </div>

        <!-- Quiz-inneh√•ll som byts ut dynamiskt -->
        <div id="quizContent" class="hidden">
            <!-- Quiz content will be inserted here by JavaScript -->
        </div>
    </div>

    <!-- Floating action buttons nere till h√∂ger -->
    <div class="floating-buttons">
        <button class="floating-btn tech-btn" onclick="openModal('techModal')" title="Teknisk beskrivning">üîß</button>
        <button class="floating-btn prompt-btn" onclick="openModal('promptModal')" title="Visa prompt">üìÑ</button>
    </div>

    <!-- Modal f√∂r teknisk beskrivning -->
    <div id="techModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('techModal')">&times;</span>
            <h2>üîß Teknisk beskrivning</h2>
            <p><strong>Teknologier:</strong></p>
            <ul>
                <li><strong>HTML5:</strong> Semantisk struktur och tillg√§nglighet</li>
                <li><strong>CSS3:</strong> Flexbox, Grid, animationer och gradients</li>
                <li><strong>Vanilla JavaScript:</strong> Ingen externa ramverk, ren ES6+</li>
                <li><strong>Google Fonts:</strong> Fredoka f√∂r rubriker, Open Sans f√∂r br√∂dtext</li>
            </ul>
            
            <p><strong>Funktioner:</strong></p>
            <ul>
                <li>Interaktivt quiz med 5 fr√•gor om Simrishamns kommunkostnader</li>
                <li>Progressbar som visar framsteg genom quizet</li>
                <li>Informationssektion om kommunens ekonomiska situation</li>
                <li>Animerade √∂verg√•ngar och hover-effekter</li>
                <li>Responsiv design f√∂r alla enheter</li>
                <li>Modal-f√∂nster med teknisk info och prompt</li>
                <li>Automatisk visning av r√§tta svar och f√∂rklaringar med k√§llor</li>
                <li>F√§rgkodade svar (gr√∂n f√∂r r√§tt, r√∂d f√∂r fel)</li>
                <li>Gul bakgrund f√∂r indataf√§lt enligt anv√§ndarens √∂nskem√•l</li>
            </ul>

            <p><strong>Design:</strong></p>
            <ul>
                <li>Kommunf√§rger: R√∂d (Kultur & Fritid) och Bl√• (Socialf√∂rvaltning)</li>
                <li>Rundade h√∂rn och skuggor f√∂r modern look</li>
                <li>F√§rgrik progressbar och dekorativ topp-bar</li>
                <li>Floating action buttons nere till h√∂ger</li>
                <li>Speciell kommunbeskrivning med animerad inmatning</li>
            </ul>

            <p><strong>Kompatibilitet:</strong> Fungerar i alla moderna webbl√§sare</p>
        </div>
    </div>

    <!-- Modal f√∂r att visa ursprunglig prompt -->
    <div id="promptModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('promptModal')">&times;</span>
            <h2>üìÑ Ursprunglig prompt</h2>
            <p>Jag vill att du g√∂r ett quiz som utg√•r fr√•n <strong>quiz.html</strong> strukturen. Jag vill att quizet ska fokusera p√• det som som √•terfinns i <strong>Simrishamns_kommunkostnader.html</strong>. Du ska bygga programmet, quiziet, p√• <strong>index.html</strong> filen. Alla andra filer ska vara of√∂r√§ndrade.</p>
            
            <p>Du har information om vad som h√§nt till och med augusti inom de tv√• f√∂rvaltningarna <strong>Kultur och Fritid</strong> och <strong>Socialf√∂rvaltningen</strong> i tv√• filer som ligger i samma mapp.</p>

            <p><strong>Nya quiz-fr√•gor:</strong> 5 fr√•gor om Simrishamns kommunkostnader med fokus p√• Kultur & Fritid och Socialf√∂rvaltningen.</p>

            <p><strong>Teknisk implementation:</strong> Samma tekniska struktur som quiz.html men anpassad f√∂r kommunekonomi-inneh√•ll.</p>

            <p><strong>Designkrav:</strong> Samma f√§rgtema och funktionalitet som quiz.html, men anpassat f√∂r kommunal ekonomi med responsiv design och moderna interaktionseffekter.</p>
        </div>
    </div>

    <script>
        // Quiz-data med fr√•gor, svarsalternativ, r√§tta svar och f√∂rklaringar
        // H√§r skedde en uppdatering - skapade nya fr√•gor baserade p√• Simrishamns kommunkostnader
        // ist√§llet f√∂r kulturkanon-fr√•gor
        const quizData = [
            {
                question: "Hur mycket kostar Kultur & Fritid per inv√•nare i Simrishamn, och hur f√∂rh√•ller sig detta till uppskattade riksgenomsnitt? (OBS: J√§mf√∂relser √§r os√§kra eftersom definitioner av 'Kultur & Fritid' varierar mellan kommuner)",
                options: [
                    "A) 3 198 kr per inv√•nare, 32% l√§gre √§n uppskattade riksgenomsnittet",
                    "B) 4 700 kr per inv√•nare, samma som uppskattade riksgenomsnittet", 
                    "C) 2 850 kr per inv√•nare, 40% l√§gre √§n uppskattade riksgenomsnittet",
                    "D) 3 500 kr per inv√•nare, 25% l√§gre √§n uppskattade riksgenomsnittet"
                ],
                correct: 0,
                explanation: "‚úÖ R√§tt svar: A) Kultur & Fritid kostar 3 198 kr per inv√•nare, vilket √§r 32% l√§gre √§n det uppskattade riksgenomsnittet p√• 4 700 kr. VIKTIGT: Dessa j√§mf√∂relser √§r os√§kra eftersom kommuner definierar 'Kultur & Fritid' olika.",
                source: "üìä K√§lla: Simrishamns kommunkostnader 2025 - Kultur & Fritid: 60,757 mkr/√•r √∑ 19 000 inv√•nare = 3 198 kr per inv√•nare. Riksgenomsnitt √§r uppskattning baserad p√• SCB-data och totalkostnader."
            },
            {
                question: "Socialf√∂rvaltningen kostar 615,6 mkr per √•r. Hur m√•nga g√•nger st√∂rre √§r denna kostnad j√§mf√∂rt med Kultur & Fritid?",
                options: [
                    "A) 8,5 g√•nger st√∂rre",
                    "B) 10,1 g√•nger st√∂rre",
                    "C) 12,3 g√•nger st√∂rre", 
                    "D) 15,2 g√•nger st√∂rre"
                ],
                correct: 1,
                explanation: "‚úÖ R√§tt svar: B) Socialf√∂rvaltningen (615,6 mkr) kostar 10,1 g√•nger mer √§n Kultur & Fritid (60,8 mkr).",
                source: "üìä K√§lla: 615,6 mkr √∑ 60,8 mkr = 10,1 g√•nger st√∂rre kostnad f√∂r Socialf√∂rvaltningen"
            },
            {
                question: "Vilken andel av Simrishamns befolkning √§r √∂ver 65 √•r, och hur p√•verkar detta kommunens kostnader?",
                options: [
                    "A) 28,5% √∂ver 65 √•r, medf√∂r m√•ttligt h√∂ga kostnader",
                    "B) 35,5% √∂ver 65 √•r, medf√∂r h√∂ga kostnader trots effektiv √§ldrev√•rd",
                    "C) 42,0% √∂ver 65 √•r, medf√∂r extremt h√∂ga kostnader",
                    "D) 20,0% √∂ver 65 √•r, samma som riksgenomsnittet"
                ],
                correct: 1,
                explanation: "‚úÖ R√§tt svar: B) 35,5% av befolkningen √§r √∂ver 65 √•r (j√§mf√∂rt med riksgenomsnittet 20%), vilket medf√∂r h√∂ga totalkostnader trots att Simrishamn √§r effektiv per √§ldre inv√•nare.",
                source: "üìä K√§lla: Simrishamns demografiska 'paradox' - m√•nga √§ldre inv√•nare √ó effektiv kostnad per √§ldre = √§nd√• h√∂g total kostnad per inv√•nare"
            },
            {
                question: "Hur f√∂rdelar sig Socialf√∂rvaltningens kostnader mellan de tre huvudkategorierna Barn & Unga, Vuxna och √Ñldre?",
                options: [
                    "A) Barn & Unga: 38,4 mkr, Vuxna: 167,2 mkr, √Ñldre: 394,5 mkr",
                    "B) Barn & Unga: 120,0 mkr, Vuxna: 200,0 mkr, √Ñldre: 295,6 mkr",
                    "C) Barn & Unga: 250,0 mkr, Vuxna: 100,0 mkr, √Ñldre: 265,6 mkr", 
                    "D) Barn & Unga: 180,0 mkr, Vuxna: 280,0 mkr, √Ñldre: 155,6 mkr"
                ],
                correct: 0,
                explanation: "‚úÖ R√§tt svar: A) √Ñldre tar den st√∂rsta delen (394,5 mkr), f√∂ljt av Vuxna (167,2 mkr) och Barn & Unga (38,4 mkr). Detta speglar Simrishamns demografiska struktur med 35,5% av befolkningen √∂ver 65 √•r.",
                source: "üìä K√§lla: Socialf√∂rvaltningens f√∂rdelning - √Ñldre st√•r f√∂r 64% av kostnaderna, vilket speglar kommunens demografiska struktur med extremt h√∂g andel √§ldre inv√•nare"
            },
            {
                question: "Trots att Simrishamn har h√∂ga sociala kostnader per inv√•nare, vad visar analysen om kommunens effektivitet inom √§ldrev√•rden? (OBS: J√§mf√∂relser √§r os√§kra eftersom 'socialf√∂rvaltning' definieras olika mellan kommuner)",
                options: [
                    "A) Simrishamn √§r 16% mer kostnadseffektiv per √§ldre inv√•nare √§n uppskattade riksgenomsnittet",
                    "B) Simrishamn har samma kostnadseffektivitet som uppskattade riksgenomsnittet",
                    "C) Simrishamn √§r 25% mindre kostnadseffektiv √§n uppskattade riksgenomsnittet",
                    "D) Data saknas f√∂r att g√∂ra denna j√§mf√∂relse"
                ],
                correct: 0,
                explanation: "‚úÖ R√§tt svar: A) Simrishamn √§r faktiskt 16% mer kostnadseffektiv per √§ldre inv√•nare (58 489 kr vs uppskattat riksgenomsnitt 70 000 kr), men den stora andelen √§ldre g√∂r att totalkostnaderna √§nd√• blir h√∂ga. VIKTIGT: J√§mf√∂relser √§r os√§kra eftersom kommuner organiserar socialf√∂rvaltning olika.",
                source: "üìä K√§lla: Paradoxen f√∂rklarad - effektiv √§ldrev√•rd √ó m√•nga √§ldre inv√•nare = h√∂ga totalkostnader per inv√•nare trots god effektivitet. Riksgenomsnitt √§r uppskattning baserad p√• SCB-data och kostnadstrender."
            }
        ];

        // Globala variabler f√∂r quiz-status
        let currentQuestion = 0;
        let score = 0;
        let selectedAnswer = null;
        let answered = false;
        let quizPhase = 'initial'; // 'initial', 'description', 'question', 'result'

        // DOM-element referenser
        const imageSection = document.getElementById('imageSection');
        const kommunDescription = document.getElementById('kommunDescription');
        const quizContent = document.getElementById('quizContent');
        const progressFill = document.getElementById('progressFill');

        // Funktion f√∂r att visa bild under en viss tid
        // H√§r skedde en uppdatering - √§ndrade fr√•n 2 sekunder till 4 sekunder enligt anv√§ndarens √∂nskem√•l
        function showImage(duration, callback, text = "Simrishamns kommun - ekonomisk √∂versikt 2025") {
            imageSection.classList.remove('hidden');
            kommunDescription.classList.add('hidden');
            quizContent.classList.add('hidden');
            
            // Uppdatera bildtext
            const imageText = document.querySelector('.image-text');
            imageText.textContent = text;
            
            setTimeout(() => {
                if (callback) callback();
            }, duration);
        }

        // Funktion f√∂r att visa kommunbeskrivning
        // H√§r skedde en uppdatering - la till text om Simrishamns kommunkostnader
        function showKommunDescription() {
            quizPhase = 'description';
            imageSection.classList.add('hidden');
            kommunDescription.classList.remove('hidden');
            quizContent.classList.add('hidden');
            
            // Nu v√§ntar vi p√• att anv√§ndaren klickar p√• knappen ist√§llet f√∂r automatisk timer
        }

        // H√§r skedde en uppdatering - ny funktion f√∂r att g√• vidare till quiz n√§r anv√§ndaren klickar
        function proceedToQuiz() {
            showQuestion();
        }

        // Funktion f√∂r att d√∂lja allt och visa quiz-inneh√•ll
        function hideAllShowQuiz() {
            imageSection.classList.add('hidden');
            kommunDescription.classList.add('hidden');
            quizContent.classList.remove('hidden');
        }

        // Funktion f√∂r att uppdatera progressbaren
        function updateProgress() {
            const progress = (currentQuestion / quizData.length) * 100;
            progressFill.style.width = progress + '%';
        }

        // Funktion f√∂r att visa en fr√•ga
        function showQuestion() {
            quizPhase = 'question';
            hideAllShowQuiz();
            
            const questionData = quizData[currentQuestion];
            
            quizContent.innerHTML = `
                <div class="question-container">
                    <div class="question-number">Fr√•ga ${currentQuestion + 1} av ${quizData.length}</div>
                    <div class="question-text">${questionData.question}</div>
                    <div class="options-container" id="optionsContainer">
                        ${questionData.options.map((option, index) => `
                            <div class="option" onclick="selectAnswer(${index})" data-index="${index}">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="answer-feedback" id="answerFeedback"></div>
                    <button class="next-btn" id="nextBtn" onclick="nextQuestion()" disabled>
                        ${currentQuestion === quizData.length - 1 ? 'Se resultat üéâ' : 'N√§sta fr√•ga ‚û°Ô∏è'}
                    </button>
                </div>
            `;
            
            selectedAnswer = null;
            answered = false;
        }

        // Funktion f√∂r att hantera svar p√• fr√•gor
        function selectAnswer(answerIndex) {
            if (answered) return;
            
            selectedAnswer = answerIndex;
            const options = document.querySelectorAll('.option');
            const questionData = quizData[currentQuestion];
            
            // Ta bort tidigare markeringar
            options.forEach(option => option.classList.remove('selected'));
            
            // Markera valt svar
            options[answerIndex].classList.add('selected');
            
            // Visa r√§tt/fel svar efter kort f√∂rdr√∂jning
            setTimeout(() => {
                answered = true;
                
                options.forEach((option, index) => {
                    option.classList.add('disabled');
                    if (index === questionData.correct) {
                        option.classList.add('correct');
                    } else if (index === answerIndex && index !== questionData.correct) {
                        option.classList.add('incorrect');
                    }
                });
                
                // Uppdatera po√§ng
                if (answerIndex === questionData.correct) {
                    score++;
                }
                
                // Visa feedback
                showFeedback();
                
                // Aktivera n√§sta-knappen
                document.getElementById('nextBtn').disabled = false;
            }, 500);
        }

        // Funktion f√∂r att visa feedback efter svar
        function showFeedback() {
            const questionData = quizData[currentQuestion];
            const feedbackDiv = document.getElementById('answerFeedback');
            
            feedbackDiv.innerHTML = `
                <div class="correct-answer">${questionData.explanation}</div>
                <div>${questionData.source}</div>
            `;
            
            feedbackDiv.classList.add('show');
        }

        // Funktion f√∂r att g√• till n√§sta fr√•ga eller visa resultat
        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                updateProgress();
                // G√• direkt till n√§sta fr√•ga
                showQuestion();
            } else {
                showResults();
            }
        }

        // Funktion f√∂r att visa slutresultat
        function showResults() {
            quizPhase = 'result';
            hideAllShowQuiz();
            
            const percentage = Math.round((score / quizData.length) * 100);
            let message = "";
            let emoji = "";
            
            if (percentage >= 80) {
                message = "Fantastiskt! Du √§r en riktig expert p√• Simrishamns kommunkostnader! üåü";
                emoji = "üèÜ";
            } else if (percentage >= 60) {
                message = "Bra jobbat! Du f√∂rst√•r kommunens ekonomiska situation v√§l! üëè";
                emoji = "üéâ";
            } else if (percentage >= 40) {
                message = "Inte illa! Det finns mer att l√§ra om kommunal ekonomi! üìö";
                emoji = "üëç";
            } else {
                message = "En bra start! Kommunal ekonomi √§r komplext - forts√§tt utforska! üîç";
                emoji = "üå±";
            }
            
            quizContent.innerHTML = `
                <div class="results-container">
                    <div class="results-title">${emoji} Quiz slutf√∂rd!</div>
                    <div class="score">${score}/${quizData.length}</div>
                    <div class="score-message">${message}</div>
                    <div class="score-message">Du fick ${percentage}% r√§tt!</div>
                    <div class="choice-buttons">
                        <button class="restart-btn" onclick="restartQuiz()">K√∂r igen üîÑ</button>
                        <button class="continue-to-costs-btn" onclick="showInfoScreen()">G√• vidare till kostnadsfilen üìä</button>
                    </div>
                </div>
            `;
            
            updateProgress();
        }

        // Funktion f√∂r att starta om quizet
        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            selectedAnswer = null;
            answered = false;
            startQuiz();
        }

        // H√§r skedde en uppdatering - ny funktion f√∂r att visa informationssk√§rm innan kostnadsfilen
        function showInfoScreen() {
            quizPhase = 'info';
            hideAllShowQuiz();
            
            quizContent.innerHTML = `
                <div class="info-screen">
                    <h2>üìä Innan du g√•r vidare till kostnadsfilen</h2>
                    
                    <div class="info-warning">
                        <h3>‚ö†Ô∏è Viktigt att komma ih√•g</h3>
                        <p><strong>Alla genomsnittliga kostnader i denna analys √§r uppskattade!</strong></p>
                        <p>Det √§r mycket sv√•rt att j√§mf√∂ra kommuner eftersom:</p>
                        <ul>
                            <li>Definitionerna av "Kultur & Fritid" varierar mellan kommuner</li>
                            <li>Organisationen av "socialf√∂rvaltning" skiljer sig √•t</li>
                            <li>Redovisningsmetoder och kategoriseringar √§r inte standardiserade</li>
                            <li>Riksgenomsnitt √§r baserade p√• uppskattningar fr√•n SCB-data och totalkostnader</li>
                        </ul>
                    </div>
                    
                    <div class="info-explanation">
                        <h3>üìã Hur kostnadsfilen √§r uppbyggd</h3>
                        <p>I n√§sta fil (Simrishamns_kommunkostnader.html) kommer du att se:</p>
                        <ul>
                            <li><strong>Visuell j√§mf√∂relse:</strong> Interaktiva staplar som visar proportionerna mellan Kultur & Fritid och Socialf√∂rvaltningen</li>
                            <li><strong>Olika vyer:</strong> Du kan v√§xla mellan totala kostnader, kostnader per inv√•nare och j√§mf√∂relser med Sverige</li>
                            <li><strong>Demografisk f√∂rklaring:</strong> Varf√∂r Simrishamn har h√∂ga sociala kostnader trots effektiv √§ldrev√•rd</li>
                            <li><strong>Detaljerad uppdelning:</strong> Hur socialf√∂rvaltningens kostnader f√∂rdelar sig mellan Barn & Unga, Vuxna och √Ñldre</li>
                            <li><strong>Interaktiva funktioner:</strong> Hover-effekter, tooltips med ber√§kningsgrunder och modal-f√∂nster med teknisk information</li>
                        </ul>
                        <p><em>Kom ih√•g att alla j√§mf√∂relser med riksgenomsnitt √§r uppskattningar och b√∂r tolkas med f√∂rsiktighet!</em></p>
                    </div>
                    
                    <div class="choice-buttons">
                        <button class="restart-btn" onclick="restartQuiz()">Tillbaka till quiz üîÑ</button>
                        <button class="proceed-btn" onclick="goToCostsFile()">Forts√§tt till kostnadsfilen ‚û°Ô∏è</button>
                    </div>
                </div>
            `;
        }

        // H√§r skedde en uppdatering - ny funktion f√∂r att g√• till kostnadsfilen
        function goToCostsFile() {
            // √ñppna kostnadsfilen i samma f√∂nster
            window.location.href = 'Simrishamns_kommunkostnader.html';
        }

        // Funktion f√∂r att starta quizet
        // H√§r skedde en uppdatering - √§ndrade sekvensen f√∂r att visa bild i 4 sekunder, 
        // sedan kommunbeskrivning, sedan f√∂rsta fr√•gan
        function startQuiz() {
            quizPhase = 'initial';
            updateProgress();
            // Visa bild i 4 sekunder, sedan kommunbeskrivning med knapp f√∂r att forts√§tta
            showImage(4000, () => {
                showKommunDescription();
            }, "V√§lkommen till quizet om Simrishamns kommunkostnader!");
        }

        // Funktioner f√∂r modal-f√∂nster
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // St√§ng modal n√§r man klickar utanf√∂r
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // Starta quizet n√§r sidan laddas
        // Anv√§nder ES2023 funktionalitet med modern event handling
        window.addEventListener('load', startQuiz);
    </script>
</body>
</html>
